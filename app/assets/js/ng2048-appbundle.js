!function(){"use strict";angular.module("ng2048",["ngResource","ngAria","ngMaterial","ngMdIcons","ngMessages","ngCookies","ngAnimate","ngSanitize","ui.router","home"])}(),function(){"use strict";function a(a,b,c,d,e){c.hashPrefix("!"),d.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",e.theme("blue").primaryPalette("blue-grey").accentPalette("amber").warnPalette("red").dark(),e.theme("lime").primaryPalette("lime").accentPalette("orange").warnPalette("blue"),e.alwaysWatchTheme(!0),b.otherwise("/dashboard")}function b(a){console.log("AngularJS run() function...")}angular.module("ng2048").config(a).run(b),a.$inject=["$stateProvider","$urlRouterProvider","$locationProvider","$httpProvider","$mdThemingProvider"],b.$inject=["$rootScope"]}(),function(){"use strict";angular.module("home",[])}(),angular.module("ng2048").config(["$stateProvider",function(a){a.state("home",{url:"","abstract":!0,templateUrl:"app/modules/home/home.html",controller:"HomeCtrl",controllerAs:"vm"}).state("home.dashboard",{url:"/dashboard",templateUrl:"app/modules/home/gamecard.html"})}]),function(){"use strict";function a(a,b,c){var d,e=this;e.title="Phangular 2048!",e.version="v0.5.0",e["default"]=!0,e.userScore=sessionStorage.getItem("2048score")?parseInt(sessionStorage.getItem("2048score")):0,e.name="Player 1",c.get("/gethighscore").success(function(b,c,d,f){console.log("success data hs",b),e.highScore=b,a.$broadcast("hs",b)}).error(function(a,b,c,d){console.log("error getting hs",a)}),a.$on("addScore",function(b,d){a.$apply(function(){e.userScore+=d});var f={name:e.name,score:e.userScore};e.userScore>e.highScore.score&&c.post("/updatescore",JSON.stringify(f)).success(function(b,c,d,e){console.log("success data",b),a.$broadcast("hs",b.score)}).error(function(a,b,c,d){console.log("error data",a)}),sessionStorage.setItem("2048score",e.userScore)}),a.$on("gameOver",function(c,f){d=b.alert({title:"Game Over!",scope:a,textContent:"Your score was "+e.userScore+"! Good Job!",clickOutsideToClose:!0,ok:"Close"}),b.show(d)})}angular.module("ng2048").controller("HomeCtrl",a),a.$inject=["$scope","$mdDialog","$http"]}(),function(){"use strict";function a(a,b,c,d,e){var f=this;f.toggleSidenav=function(b){a(b).toggle()}}angular.module("ng2048").controller("LayoutCtrl",a),a.$inject=["$mdSidenav","$cookies","$state","$mdToast","$mdDialog"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i){var j=this;j.highScore=0,j.enterName=!1,j.playerName="Player 1",j.lightTheme=!0,f.$on("hs",function(a,b){j.navHighScore=b}),j.newGame=function(){sessionStorage.clear(),f.$parent.vm.userScore=0,h.newGame(f)},j.enteringName=function(){j.enterName&&(f.$parent.vm.name=j.playerName),j.enterName=!j.enterName},j.checkForEnter=function(a){console.log("key",a),13===a.which&&j.enteringName()},j.toggleSidenav=function(b){a(b).toggle()},j.closeSidenav=function(){a("left").close()},j.changeTheme=function(){f.$parent.vm["default"]=!f.$parent.vm["default"],j.lightTheme=f.$parent.vm["default"]},f.$on("$stateChangeSuccess",j.closeSidenav)}a.$inject=["$mdSidenav","$state","$mdBottomSheet","$mdToast","MenuService","$scope","$rootScope","GameLogicService","$http"],angular.module("ng2048").controller("SidenavCtrl",a)}(),function(){"use strict";function a(){return{createGame:function(a){this.game(a)},game:function(a){function b(){A.load.image("tile","/app/assets/images/tile.png"),A.load.image("grid","/app/assets/images/grid.png")}function c(){A.world;A.add.image(0,0,"grid").anchor.set(0);var a=A.input.keyboard.createCursorKeys();s=A.input.keyboard.addKey(Phaser.Keyboard.W),s.onDown.add(m,this),a.up.onDown.add(m,this),t=A.input.keyboard.addKey(Phaser.Keyboard.S),t.onDown.add(p,this),a.down.onDown.add(p,this),u=A.input.keyboard.addKey(Phaser.Keyboard.A),u.onDown.add(n,this),a.left.onDown.add(n,this),v=A.input.keyboard.addKey(Phaser.Keyboard.D),v.onDown.add(o,this),a.right.onDown.add(o,this),r=A.add.group(),q?e():(f(),f())}function d(a,b,c,d){var e=A.add.sprite(h(d)*w,g(d)*w,"tile");e.pos=d,e.alpha=0;var f=A.add.text(w/2,w/2,c.toString(),{font:"bold 16px Arial",align:"center"});f.anchor.set(.5),e.addChild(f),r.add(e);var i=A.add.tween(e);i.to({alpha:1},250),i.onComplete.add(function(){j(),z=!0}),i.start()}function e(){q.forEach(function(a,b){var c=Math.floor(b/4),e=b%4;0!==a&&d(e,c,a,b)})}function f(){for(var a;0!==x[a];)a=Math.floor(16*Math.random());x[a]=2;var b=A.add.sprite(h(a)*w,g(a)*w,"tile");b.pos=a,b.alpha=0;var c=A.add.text(w/2,w/2,"2",{font:"bold 16px Arial",align:"center"});c.anchor.set(.5),b.addChild(c),r.add(b);var d=A.add.tween(b);d.to({alpha:1},250),d.onComplete.add(function(){j(),z=!0}),d.start()}function g(a){return Math.floor(a/4)}function h(a){return a%4}function i(b){a.$emit("addScore",2*b)}function j(){r.forEach(function(a){var b=x[a.pos];a.getChildAt(0).text=b,a.tint=y[b]})}function k(a){a?f():z=!0,sessionStorage.setItem("2048board",x)}function l(a,b,c,d){x[c]=x[b],x[b]=0,a.pos=c;var e=A.add.tween(a);e.to({x:w*h(c),y:w*g(c)},150),d&&(x[c]*=2,e.onComplete.add(function(){a.destroy()})),e.start()}function m(){if(z){z=!1;var a=!1;r.sort("y",Phaser.Group.SORT_ASCENDING),r.forEach(function(b){var c=g(b.pos),d=h(b.pos);if(c>0){for(var e=!1,f=c-1;f>=0;f--)if(0!==x[4*f+d]){x[4*f+d]===x[4*c+d]&&(i(x[4*f+d]),e=!0,f--);break}c!==f+1&&(a=!0,l(b,4*c+d,4*(f+1)+d,e))}}),k(a)}}function n(){if(z){z=!1;var a=!1;r.sort("x",Phaser.Group.SORT_ASCENDING),r.forEach(function(b){var c=g(b.pos),d=h(b.pos);if(d>0){for(var e=!1,f=d-1;f>=0;f--)if(0!==x[4*c+f]){x[4*c+f]===x[4*c+d]&&(i(x[4*c+f]),e=!0,f--);break}d!==f+1&&(a=!0,l(b,4*c+d,4*c+f+1,e))}}),k(a)}}function o(){if(z){z=!1;var a=!1;r.sort("x",Phaser.Group.SORT_DESCENDING),r.forEach(function(b){var c=g(b.pos),d=h(b.pos);if(3>d){for(var e=!1,f=d+1;3>=f;f++)if(0!==x[4*c+f]){x[4*c+f]===x[4*c+d]&&(e=!0,i(x[4*c+f]),f++);break}d!==f-1&&(a=!0,l(b,4*c+d,4*c+f-1,e))}}),k(a)}}function p(){if(z){z=!1;var a=!1;r.sort("y",Phaser.Group.SORT_DESCENDING),r.forEach(function(b){var c=g(b.pos),d=h(b.pos);if(3>c){for(var e=!1,f=c+1;3>=f;f++)if(0!==x[4*f+d]){x[4*f+d]===x[4*c+d]&&(i(x[4*f+d]),e=!0,f++);break}c!==f-1&&(a=!0,l(b,4*c+d,4*(f-1)+d,e))}}),k(a)}}var q=!1;sessionStorage.getItem("2048board")&&(q=sessionStorage.getItem("2048board").split(",").map(function(a){return parseInt(a)}));var r,s,t,u,v,w=100,x=q?q:new Array(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),y={2:16776679,4:16775620,8:16774557,16:16773494,32:16755601,64:16747109,128:16740419,256:16733986,512:15037299,1024:15684432,2048:16007990,4096:15022389,8192:13840175,16384:12986408,32768:12000284,65536:13959168},z=!1,A=new Phaser.Game(4*w,4*w,Phaser.CANVAS,"gameCanvas");this.Game=A;var B={preload:b,create:c};A.state.add("MainGame",B),A.state.start("MainGame"),window.game=A},newGame:function(a){this.Game.destroy(),this.createGame(a)}}}angular.module("ng2048").factory("GameLogicService",a),a.$inject=[]}(),function(){"use strict";function a(a){var b=[{link:".",name:"This is a Placeholder menu. It disappears when the first module has been created."}];return{listMenu:function(){return b}}}angular.module("ng2048").factory("MenuService",a),a.$inject=["$http"]}(),angular.module("ng2048").directive("dlEnterKey",function(){return function(a,b,c){b.bind("keydown keypress",function(b){var d=b.which||b.keyCode;13===d&&(console.log("enter pressed"),a.$apply(function(){a.$eval(c.dlEnterKey)}),b.preventDefault())})}}),angular.module("ng2048").directive("gameCanvas",["GameLogicService",function(a){var b=function(b,c,d){a.createGame(b)};return{template:'<div id="gameCanvas"></div>',link:b}}]);